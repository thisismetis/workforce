
<%= javascript_include_tag "//www.google.com/jsapi", "chartkick" %>

<div class="box">
<ul class="accordion-tabs-minimal">
  <li class="tab-header-and-content">
    <a href="#" class="tab-link is-active">Visualizations</a>
    <section>
      <p>New Employee Registrations By Hour:</p>
      <%= area_chart User.group_by_hour(:created_at).count %>
    </section>
  </li>
  <li class="tab-header-and-content">
    <a href="#" class="tab-link">Departments</a>
    <section>
      <%= pie_chart Department.group(:name).count %>
    </section>
  </li>
  <li class="tab-header-and-content">
    <a href="#" class="tab-link">Branches Locations</a>
    <section>
      <%= geo_chart @office_branches.group(:country).count %>  <hr>
    </section>
  </li>
  <li class="tab-header-and-content">
    <a href="#" class="tab-link">Employee Index</a>
    <section>
      <%= render @profiles %>
    </section>
  </li>
</ul>
</div>

<script>
  $(document).ready(function () {
    $('.accordion-tabs-minimal').each(function(index) {
      $(this).children('li').first().children('a').addClass('is-active').next().addClass('is-open').show();
    });

    $('.accordion-tabs-minimal').on('click', 'li > a', function(event) {
      if (!$(this).hasClass('is-active')) {
        event.preventDefault();
        var accordionTabs = $(this).closest('.accordion-tabs-minimal')
        accordionTabs.find('.is-open').removeClass('is-open').hide();

        $(this).next().toggleClass('is-open').toggle();
        accordionTabs.find('.is-active').removeClass('is-active');
        $(this).addClass('is-active');
      } else {
        event.preventDefault();
      }
    });
  });
</script>
